# Engineering Tools - Detailed Plan

## Overview

A suite of interactive visual tools for power electronics thermal and mechanical design calculations. These tools will be accessible at `/tools` on dawarazhar.com.

**Target Users:**
- Power electronics engineers
- Hardware design engineers
- Students learning thermal management
- Hobbyists building power supplies/converters

---

## Tool Categories

### Category 1: Thermal Management Tools

#### 1.1 Thermal Stack Builder (Priority: HIGH)
**Visual interactive tool to model heat flow from junction to ambient**

**Features:**
- Drag-and-drop thermal resistance blocks
- Real-time temperature calculation at each node
- Visual temperature gradient (color-coded)
- Support for parallel thermal paths
- Export thermal model as image/PDF

**Inputs:**
| Parameter | Unit | Description |
|-----------|------|-------------|
| Power dissipation | W | Heat generated by device |
| T_ambient | °C | Ambient temperature |
| R_θjc | °C/W | Junction-to-case thermal resistance |
| R_θcs | °C/W | Case-to-sink (TIM) thermal resistance |
| R_θsa | °C/W | Sink-to-ambient thermal resistance |

**Outputs:**
- Junction temperature (T_j)
- Case temperature (T_c)
- Heatsink temperature (T_s)
- Temperature margin to T_j_max
- Visual thermal stack diagram with temperatures

**Visual Design:**
```
┌─────────────────────────────────────┐
│         Junction (125°C)            │ ← RED (hot)
│  ████████████████████████████████   │
├─────────────────────────────────────┤
│         R_θjc = 0.5 °C/W            │
├─────────────────────────────────────┤
│          Case (100°C)               │ ← ORANGE
│  ████████████████████████           │
├─────────────────────────────────────┤
│    TIM: R_θcs = 0.3 °C/W            │ ← Selectable
├─────────────────────────────────────┤
│        Heatsink (85°C)              │ ← YELLOW
│  ████████████████                   │
├─────────────────────────────────────┤
│      R_θsa = 1.2 °C/W               │
├─────────────────────────────────────┤
│        Ambient (40°C)               │ ← BLUE (cool)
│  ████████                           │
└─────────────────────────────────────┘
```

---

#### 1.2 MOSFET/IGBT Power Loss Calculator (Priority: HIGH)
**Calculate conduction and switching losses for power semiconductors**

**Features:**
- Device database with common MOSFETs/IGBTs
- Manual entry option for custom devices
- Supports different topologies (buck, boost, full-bridge)
- Calculates conduction + switching losses
- Temperature-dependent R_ds(on) adjustment
- Links to thermal calculator

**Inputs:**
| Parameter | Unit | Description |
|-----------|------|-------------|
| Device type | - | MOSFET / IGBT |
| R_ds(on) or V_ce(sat) | mΩ / V | On-state resistance/voltage |
| I_d / I_c | A | Drain/collector current |
| V_ds / V_ce | V | Blocking voltage |
| f_sw | kHz | Switching frequency |
| t_on, t_off | ns | Switching times |
| Duty cycle | % | PWM duty cycle |
| E_on, E_off | mJ | Switching energies (optional) |

**Outputs:**
- Conduction loss (W)
- Turn-on switching loss (W)
- Turn-off switching loss (W)
- Gate drive loss (W)
- Total power loss (W)
- Loss breakdown pie chart
- Efficiency estimate

**Formulas:**
```
P_cond = I_rms² × R_ds(on)           [MOSFET]
P_cond = V_ce(sat) × I_avg           [IGBT]
P_sw = 0.5 × V_ds × I_d × (t_on + t_off) × f_sw
P_gate = Q_g × V_gs × f_sw
```

---

#### 1.3 Heatsink Selector & Sizer (Priority: HIGH)
**Calculate required heatsink thermal resistance and suggest options**

**Features:**
- Calculate required R_θsa from thermal budget
- Heatsink database with common models
- Natural vs forced convection modes
- Altitude derating
- Multiple device mounting calculator
- Heatsink comparison table

**Inputs:**
| Parameter | Unit | Description |
|-----------|------|-------------|
| Power dissipation | W | Total heat to dissipate |
| T_j_max | °C | Maximum junction temperature |
| T_ambient | °C | Operating ambient temperature |
| R_θjc | °C/W | Device junction-to-case |
| R_θcs | °C/W | TIM thermal resistance |
| Cooling type | - | Natural / Forced (with airflow) |
| Altitude | m | For air density derating |

**Outputs:**
- Required R_θsa (°C/W)
- Suggested heatsinks from database
- Derating factors applied
- Safety margin analysis

**Heatsink Database (Initial):**
```javascript
const heatsinks = [
  { model: "Fischer SK 129", rth_sa: 2.5, dimensions: "50x50x25mm", type: "natural" },
  { model: "Aavid 507302", rth_sa: 1.8, dimensions: "75x75x30mm", type: "natural" },
  { model: "Wakefield 423K", rth_sa: 0.85, dimensions: "100x100x40mm", type: "forced" },
  // ... more
]
```

---

#### 1.4 Transient Thermal Analyzer (Priority: MEDIUM)
**Analyze junction temperature during pulsed/cyclic operation**

**Features:**
- Input power pulse profile (graphical)
- Uses Zth curve from datasheet (Foster/Cauer network)
- Animated temperature response
- Find peak temperature
- Calculate safe pulse duration

**Inputs:**
- Pulse power (W)
- Pulse duration (ms)
- Duty cycle (%)
- Repetition rate
- Zth(j-c) curve data points or RC network values

**Outputs:**
- T_j vs time graph
- Peak junction temperature
- Thermal equilibrium temperature
- Time constant analysis

**Visual:**
```
Power ─┬─────┐     ┌─────┐     ┌─────
       │     │     │     │     │
       │     └─────┘     └─────┘
       └──────────────────────────────► time

T_j   ─┬─────╮     ╭─────╮     ╭─────
       │      ╲   ╱      ╲   ╱
       │       ╰─╯        ╰─╯
       └──────────────────────────────► time
```

---

#### 1.5 TIM (Thermal Interface Material) Comparator (Priority: MEDIUM)
**Compare different thermal interface materials**

**Features:**
- TIM database (thermal greases, pads, phase change)
- Calculate R_θcs for different TIMs
- Consider contact area and pressure
- Cost vs performance analysis

**TIM Database:**
```javascript
const tims = [
  { name: "Arctic MX-4", type: "grease", conductivity: 8.5, thickness: 0.025 },
  { name: "Bergquist Gap Pad", type: "pad", conductivity: 3.0, thickness: 0.5 },
  { name: "Laird Tpcm 585", type: "phase_change", conductivity: 3.8, thickness: 0.127 },
  // ... more
]
```

---

### Category 2: PCB Thermal Tools

#### 2.1 PCB Trace Width Calculator (Priority: HIGH)
**Calculate minimum trace width for given current (IPC-2152)**

**Features:**
- IPC-2152 compliant calculations
- Internal vs external layers
- Temperature rise visualization
- Via current capacity
- Trace resistance calculation

**Inputs:**
| Parameter | Unit | Description |
|-----------|------|-------------|
| Current | A | DC or RMS current |
| Copper weight | oz | 1oz, 2oz, etc. |
| Temperature rise | °C | Allowed temp rise |
| Trace length | mm | For resistance calc |
| Layer | - | Internal / External |
| Ambient temp | °C | Starting temperature |

**Outputs:**
- Minimum trace width (mm/mils)
- Trace resistance (mΩ)
- Voltage drop (mV)
- Power dissipation (mW)
- Visual trace preview

**Formula (IPC-2152 simplified):**
```
Area = (I / (k × ΔT^b))^(1/c)
Width = Area / Thickness

Where:
- k = 0.048 (external), 0.024 (internal)
- b = 0.44
- c = 0.725
```

---

#### 2.2 Via Thermal Resistance Calculator (Priority: LOW)
**Calculate thermal resistance of via arrays**

**Features:**
- Single via and via array calculations
- Filled vs hollow vias
- Via-in-pad considerations

---

#### 2.3 Copper Pour Heat Spreading (Priority: LOW)
**Estimate heat spreading in copper planes**

---

### Category 3: Mechanical/Cooling Tools

#### 3.1 Forced Air Cooling Calculator (Priority: MEDIUM)
**Calculate required airflow for cooling**

**Inputs:**
- Heat load (W)
- Inlet temperature (°C)
- Max outlet temperature (°C)
- Altitude (m)

**Outputs:**
- Required CFM
- Fan selection guide
- Pressure drop estimate

**Formula:**
```
CFM = (Q × 3.16) / (ρ × Cp × ΔT)
```

---

#### 3.2 Natural Convection Estimator (Priority: LOW)
**Estimate heat dissipation from surfaces**

---

#### 3.3 Enclosure Thermal Calculator (Priority: LOW)
**Simple enclosure thermal model**

---

### Category 4: Component Calculators

#### 4.1 Inductor Temperature Rise (Priority: MEDIUM)
**Estimate inductor heating from core and copper losses**

---

#### 4.2 Capacitor Ripple Current Heating (Priority: MEDIUM)
**Calculate capacitor heating from ripple current**

---

#### 4.3 Transformer Thermal Model (Priority: LOW)
**Basic transformer thermal analysis**

---

## Implementation Priority

### Phase 1: Core Tools (Implement Now)
1. **Thermal Stack Builder** - Most visual, foundational
2. **MOSFET/IGBT Loss Calculator** - High utility
3. **Heatsink Selector** - Practical tool
4. **PCB Trace Width Calculator** - Common need
5. **Transient Thermal Analyzer** - Unique differentiator

### Phase 2: Enhanced Tools (Future)
6. TIM Comparator
7. Forced Air Cooling Calculator
8. Inductor Temperature Rise
9. Capacitor Ripple Heating

### Phase 3: Advanced Tools (Future)
10. Via Thermal Calculator
11. Copper Pour Heat Spreading
12. Enclosure Thermal Model
13. Transformer Thermal Model

---

## Technical Architecture

### File Structure
```
/app/tools/
├── page.tsx                          # Tools landing page (grid of tools)
├── layout.tsx                        # Tools layout (sidebar nav)
├── thermal-stack/
│   ├── page.tsx                      # Thermal Stack Builder
│   └── components/
│       ├── thermal-block.tsx         # Individual thermal block
│       ├── thermal-diagram.tsx       # SVG diagram
│       └── temperature-bar.tsx       # Temp visualization
├── power-loss/
│   ├── page.tsx                      # MOSFET/IGBT Calculator
│   └── components/
│       ├── device-selector.tsx       # Device dropdown
│       ├── loss-pie-chart.tsx        # Loss breakdown
│       └── device-database.ts        # Device data
├── heatsink-selector/
│   ├── page.tsx                      # Heatsink Selector
│   └── components/
│       ├── heatsink-card.tsx         # Heatsink display
│       └── heatsink-database.ts      # Heatsink data
├── pcb-trace/
│   ├── page.tsx                      # PCB Trace Calculator
│   └── components/
│       ├── trace-preview.tsx         # Visual trace
│       └── ipc-calculator.ts         # IPC-2152 formulas
├── transient-thermal/
│   ├── page.tsx                      # Transient Analyzer
│   └── components/
│       ├── pulse-editor.tsx          # Power pulse input
│       ├── zth-input.tsx             # Zth curve input
│       └── temperature-chart.tsx     # Time response
└── lib/
    ├── thermal-calculations.ts       # Core thermal math
    ├── electrical-calculations.ts    # Electrical formulas
    └── constants.ts                  # Physical constants
```

### Shared Components
```
/components/tools/
├── calculator-card.tsx               # Input/output card wrapper
├── parameter-input.tsx               # Labeled number input
├── unit-selector.tsx                 # Unit dropdown (mΩ, Ω, etc.)
├── result-display.tsx                # Formatted result with unit
├── info-tooltip.tsx                  # Help tooltips
├── export-button.tsx                 # Export to PDF/image
└── share-button.tsx                  # Share calculation URL
```

### Data Files
```
/data/
├── mosfets.json                      # MOSFET database
├── igbts.json                        # IGBT database
├── heatsinks.json                    # Heatsink catalog
├── tims.json                         # TIM database
└── formulas.json                     # Formula references
```

---

## UI/UX Design Principles

1. **Visual First**: Show diagrams, not just numbers
2. **Real-time Updates**: Calculate as user types
3. **Educational**: Explain formulas and assumptions
4. **Mobile Friendly**: Responsive design
5. **Shareable**: URL contains calculation state
6. **Exportable**: PDF reports for documentation

---

## Technology Stack

| Component | Technology |
|-----------|------------|
| Framework | Next.js 15 (existing) |
| UI Components | shadcn/ui (existing) |
| Charts | Recharts (existing) |
| Diagrams | SVG + Framer Motion |
| Math | math.js or custom TypeScript |
| State | React useState + URL params |
| Export | html2canvas + jsPDF |

---

## Future Enhancements

1. **User Accounts**: Save calculations
2. **AI Assistant**: Natural language queries ("what heatsink for 50W MOSFET?")
3. **API Access**: Programmatic calculations
4. **Component Ordering**: Links to distributors
5. **Simulation**: Simple SPICE-like transient analysis
6. **3D Visualization**: WebGL thermal models

---

## Success Metrics

- Tool usage analytics
- Time spent on each tool
- Calculations performed
- Return visitors
- Social shares

---

## Timeline Estimate

| Phase | Tools | Effort |
|-------|-------|--------|
| Phase 1 | 5 core tools | 2-3 weeks |
| Phase 2 | 4 enhanced tools | 2 weeks |
| Phase 3 | 4 advanced tools | 3 weeks |

---

*Document created: November 30, 2024*
*Author: Dawar Azhar*
